{"title":"Linux与Windows下的终端美化","date":"2022-08-19T05:46:19.000Z","date_formatted":{"ll":"2022年8月19日","L":"2022/08/19","MM-DD":"08-19"},"link":"2022/08/19/Linux与Windows下的终端美化设置","comments":true,"tags":["日常学习"],"categories":["学习"],"updated":"2022-08-19T09:22:55.055Z","content":"<p>最近使用WSL练习命令以及写程序的次数比较频繁，看着黑白的终端有些枯燥无味，便想着稍微美化一下终端，自己看着也舒服些。主要是美化下Linux下的终端，顺带也美化了下Windows的Powershell。</p>\n<h2 id=\"linux(wsl环境)\">Linux(WSL环境)<a title=\"#linux(wsl环境)\" href=\"#linux(wsl环境)\"></a></h2>\n<p>Linux下默认是使用bash作为命令行环境，我们需要切换成zsh后再进行操作，安装命令如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Ubuntu</span></span><br><span class=\"line\">apt install zsh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ArchLinux</span></span><br><span class=\"line\">pacman -S zsh</span><br></pre></td></tr></table></figure>\n<p>安装好zsh后，需要把它设置为默认的终端启动环境，否则当前终端窗口关闭后，下一次启动时默认运行的依旧是bash环境。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 当前用户下运行该命令，设置默认终端环境为zsh</span></span><br><span class=\"line\">chsh -s /bin/zsh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 若后续不想使用zsh，也可用该命令切换回bash</span></span><br><span class=\"line\">chsh -s /bin/bash</span><br></pre></td></tr></table></figure>\n<p>切换到zsh环境下，安装<a href=\"https://github.com/ohmyzsh/ohmyzsh\" target=\"_blank\">Oh My Zsh</a>，这是一个关于zsh的开源框架，用于管理配置zsh的一些功能，当然也包括美化。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">sh -c <span class=\"string\">&quot;<span class=\"subst\">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>\n<p>在zsh环境下，该命令会下载好脚本自动运行配置。此时在当前的用户目录下会生成一个.zshrc的终端配置文件（文件是隐藏文件需要用<code>ls -a</code>，才看得到），由于我只是想换个主题色彩，直接在.zshrc文件内容中找到<code>ZSH_THEME=&quot;steef&quot;</code>（我已经替换成了steef），换成你喜欢的主题就好了，Oh My Zsh提供了大量的终端配置<a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/Themes\" target=\"_blank\">主题</a>，总能找到一款适合你的。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 运行vim修改.zshrc</span></span><br><span class=\"line\">vim .zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将.zshrc中的ZSH_THEME=&quot;obbyrussell&quot;改成你自己喜欢的主题</span></span><br><span class=\"line\">ZSH_THEME=<span class=\"string\">&quot;steef&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更改完后重新启动终端，或者运行source .zshrc则可看见效果</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> .zshrc</span><br></pre></td></tr></table></figure>\n<p>由于我只是轻度美化一下，官网的github上提供了更丰富的主题，相对于没有颜色配置的bash终端，zsh显得更丰富多彩了。需要注意的是这里最好使用windows terminal来运行各种终端环境，且字体最好使用<a href=\"https://github.com/ryanoasis/nerd-fonts\" target=\"_blank\">Nerd</a>字体，否则美化后的一些特殊字符无法显示，会变成乱码。</p>\n<p><img src=\"../img/2022-08-19%20(2).png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"windows\">Windows<a title=\"#windows\" href=\"#windows\"></a></h2>\n<p>Windows下我之前一直使用cmd，主要也是之前科研环境用惯了cmd，现在网上的美化教程大部分都是基于Powershell。</p>\n<p>Windows下首先需要安装<a href=\"https://github.com/jandedobbeleer/oh-my-posh\" target=\"_blank\">oh my posh</a>，在Windows下可以在Microsoft Store中找到这个软件，当然也有别的方式安装，详情可以参考<a href=\"https://ohmyposh.dev/docs/\" target=\"_blank\">oh my posh的文档</a>。</p>\n<p><img src=\"../img/2022-08-19.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p>安装成功后打开Powershell，输入oh-my-posh，只要命令有输出不报错则安装成功。与Linux环境不太一样，oh-my-posh安装成功后不会自动生成类似于.zshrc的配置文件，还需要调用命令生成。</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># powershell</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># oh-my-posh init &lt;shell&gt; </span></span><br><span class=\"line\"><span class=\"comment\"># &lt;shell&gt;输入你使用的终端名称，windows下是powershell</span></span><br><span class=\"line\"><span class=\"built_in\">oh</span><span class=\"literal\">-my-posh</span> init powershell</span><br></pre></td></tr></table></figure>\n<p>初始化成功后，在你当前用户下<code>~\\AppData\\Local\\</code>会生成一个oh-my-posh的文件夹，里面包含一个默认关于oh-my-posh的<code>.json</code>配置文件。我们现在在官网下载一个主题配置文件放入这个文件夹中，主题配置网站：<a href=\"https://ohmyposh.dev/docs/themes\" target=\"_blank\">https://ohmyposh.dev/docs/themes</a></p>\n<p>在<code>~\\AppData\\Local\\oh-my-posh</code>新建一个<code>.json</code>文件，复制并粘贴你选中主题对应的配置内容，然后保存。</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># powershell</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在powershell中输入下面命令，即可看到主题在powershell中生效了</span></span><br><span class=\"line\"><span class=\"built_in\">oh</span><span class=\"literal\">-my-posh</span> init pwsh <span class=\"literal\">--config</span> <span class=\"string\">&quot;<span class=\"variable\">$env:POSH_THEMES_PATH</span>/jandedobbeleer.omp.json&quot;</span> | <span class=\"built_in\">Invoke-Expression</span></span><br></pre></td></tr></table></figure>\n<p>上述的<code>env:POSH_THEMES_PATH</code>为主题配置文件的目录，对应上述的<code>~\\AppData\\Local\\oh-my-posh</code>，这里因为是通过Microsoft store安装的oh my posh所以有默认对应的参数，其他方式安装的oh my posh需要指定具体的目录路径。<code>jandedobbeleer.omp.json</code>是我随便选的主题配置，可以替换成别的主题。</p>\n<p>主题配置好后我们还需要自定义一个powershell配置文件，使得每次打开powershell后主题都能自动加载。</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># powershell</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下面命令，会在当前目录的Documents(文档)下创建一个WindowsPowerShell\\Microsoft.PowerShell_profile.ps1的空文件</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!(<span class=\"built_in\">Test-Path</span> <span class=\"literal\">-Path</span> <span class=\"variable\">$PROFILE</span>)) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">New-Item</span> <span class=\"literal\">-ItemType</span> File <span class=\"literal\">-Path</span> <span class=\"variable\">$PROFILE</span> <span class=\"literal\">-Force</span></span><br><span class=\"line\">&#125;       </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将下面命令粘贴到Microsoft.PowerShell_profile.ps1的空文件中，替换对应的路径和文件</span></span><br><span class=\"line\"><span class=\"built_in\">oh</span><span class=\"literal\">-my-posh</span> init pwsh <span class=\"literal\">--config</span> <span class=\"string\">&quot;<span class=\"variable\">$env:POSH_THEMES_PATH</span>/jandedobbeleer.omp.json&quot;</span> | <span class=\"built_in\">Invoke-Expression</span></span><br></pre></td></tr></table></figure>\n<p>替换和保存后，运行powershell都会自动加载主题配置，且第一次会有对应显示花费的时间。<br>\n<img src=\"../img/2022-08-19%20(3).png\" alt=\"\" loading=\"lazy\"></p>\n<p>至此，两个终端的简单美化完毕🎉，高级功能后续再折腾。</p>\n<h2 id=\"教程参考\">教程参考<a title=\"#教程参考\" href=\"#教程参考\"></a></h2>\n<ul>\n<li><a href=\"https://ohmyposh.dev/docs/installation/customize\" target=\"_blank\">https://ohmyposh.dev/docs/installation/customize</a></li>\n<li><a href=\"https://github.com/ohmyzsh/ohmyzsh\" target=\"_blank\">https://github.com/ohmyzsh/ohmyzsh</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.2\" target=\"_blank\">https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.2</a></li>\n</ul>\n","next":{"title":"Hexo静态博客搭建记录","link":"2022/08/10/Hexo静态博客搭建记录"},"plink":"https://hyfaf.github.io/2022/08/19/Linux与Windows下的终端美化设置/","toc":[{"id":"linux(wsl环境)","title":"Linux(WSL环境)","index":"1"},{"id":"windows","title":"Windows","index":"2"},{"id":"教程参考","title":"教程参考","index":"3"}],"reading_time":"1253 字约 8 分钟"}